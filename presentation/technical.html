<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fs-explorer — Technical Deep Dive</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300;1,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #0a0a12;
            --bg: #0d1117;
            --bg-elevated: #161b22;
            --bg-code: #1c2128;
            --text: #e6edf3;
            --text-dim: #7d8590;
            --text-muted: #484f58;
            --accent-blue: #58a6ff;
            --accent-cyan: #39d4d4;
            --accent-green: #3fb950;
            --accent-yellow: #d29922;
            --accent-orange: #db6d28;
            --accent-red: #f85149;
            --accent-pink: #db61a2;
            --accent-purple: #a371f7;
            --grid-color: rgba(88, 166, 255, 0.06);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Crimson Pro', Georgia, serif;
            background: var(--bg-deep);
            color: var(--text);
            min-height: 100vh;
            overflow: hidden;
            font-size: 22px;
            line-height: 1.6;
        }

        .grid-bg {
            position: fixed;
            inset: 0;
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
        }

        .presentation {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding-left: 40px;
        }

        .slide {
            position: absolute;
            width: calc(100% - 40px);
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 80px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .slide.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        /* Typography */
        h1 {
            font-size: 64px;
            font-weight: 300;
            letter-spacing: -2px;
            margin-bottom: 16px;
            text-align: center;
        }

        h2 {
            font-size: 48px;
            font-weight: 300;
            letter-spacing: -1px;
            margin-bottom: 40px;
            text-align: center;
        }

        h3 {
            font-size: 32px;
            font-weight: 400;
            margin-bottom: 24px;
        }

        p {
            font-size: 24px;
            max-width: 900px;
            text-align: center;
            color: var(--text-dim);
        }

        .mono {
            font-family: 'IBM Plex Mono', monospace;
        }

        .highlight { color: var(--accent-cyan); }
        .highlight-yellow { color: var(--accent-yellow); }
        .highlight-green { color: var(--accent-green); }
        .highlight-red { color: var(--accent-red); }
        .highlight-purple { color: var(--accent-purple); }
        .highlight-blue { color: var(--accent-blue); }
        .highlight-orange { color: var(--accent-orange); }

        /* Fragments */
        .fragment {
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .fragment.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Code blocks */
        .code-block {
            background: var(--bg-code);
            border: 1px solid var(--bg-elevated);
            border-radius: 8px;
            padding: 24px 32px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 16px;
            line-height: 1.7;
            text-align: left;
            overflow-x: auto;
            max-width: 900px;
            width: 100%;
        }

        .code-block .comment { color: var(--text-muted); }
        .code-block .keyword { color: var(--accent-purple); }
        .code-block .string { color: var(--accent-green); }
        .code-block .function { color: var(--accent-blue); }
        .code-block .param { color: var(--accent-orange); }
        .code-block .type { color: var(--accent-cyan); }

        .code-inline {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.9em;
            background: var(--bg-elevated);
            padding: 4px 10px;
            border-radius: 4px;
            color: var(--accent-cyan);
        }

        /* Tables */
        .table {
            border-collapse: collapse;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 16px;
            margin: 20px 0;
        }

        .table th {
            background: var(--bg-elevated);
            padding: 14px 24px;
            text-align: left;
            font-weight: 500;
            color: var(--accent-cyan);
            border-bottom: 2px solid var(--accent-cyan);
        }

        .table td {
            padding: 12px 24px;
            border-bottom: 1px solid var(--bg-elevated);
            vertical-align: top;
        }

        .table tr:hover td {
            background: var(--bg-elevated);
        }

        .table .tool-name {
            color: var(--accent-yellow);
            font-weight: 500;
        }

        /* Diagrams */
        .diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .diagram-vertical {
            flex-direction: column;
            gap: 16px;
        }

        .box {
            background: var(--bg-elevated);
            border: 2px solid var(--text-muted);
            border-radius: 8px;
            padding: 16px 28px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 16px;
            text-align: center;
            min-width: 160px;
            transition: all 0.3s;
        }

        .box.small {
            padding: 10px 18px;
            font-size: 14px;
            min-width: 120px;
        }

        .box.large {
            padding: 24px 40px;
            font-size: 20px;
        }

        .box.blue { border-color: var(--accent-blue); color: var(--accent-blue); }
        .box.cyan { border-color: var(--accent-cyan); color: var(--accent-cyan); }
        .box.green { border-color: var(--accent-green); color: var(--accent-green); }
        .box.yellow { border-color: var(--accent-yellow); color: var(--accent-yellow); }
        .box.red { border-color: var(--accent-red); color: var(--accent-red); }
        .box.purple { border-color: var(--accent-purple); color: var(--accent-purple); }
        .box.orange { border-color: var(--accent-orange); color: var(--accent-orange); }

        .box.filled {
            background: var(--accent-cyan);
            color: var(--bg-deep);
            border-color: var(--accent-cyan);
        }

        .arrow {
            font-size: 24px;
            color: var(--text-muted);
        }

        .arrow-down { transform: rotate(90deg); }

        /* Architecture grid */
        .arch-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            max-width: 1000px;
        }

        .arch-box {
            background: var(--bg-elevated);
            border: 1px solid var(--text-muted);
            border-radius: 8px;
            padding: 20px;
        }

        .arch-box h4 {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 14px;
            color: var(--accent-cyan);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .arch-box ul {
            list-style: none;
            font-size: 15px;
            color: var(--text-dim);
        }

        .arch-box li {
            padding: 4px 0;
        }

        .arch-box li::before {
            content: '›';
            color: var(--accent-purple);
            margin-right: 8px;
        }

        /* Tool cards */
        .tool-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            max-width: 1100px;
        }

        .tool-card {
            background: var(--bg-elevated);
            border: 1px solid var(--text-muted);
            border-radius: 8px;
            padding: 20px;
            text-align: left;
            transition: all 0.3s;
        }

        .tool-card:hover {
            border-color: var(--accent-cyan);
        }

        .tool-card .tool-name {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .tool-card .tool-desc {
            font-size: 15px;
            color: var(--text-dim);
            margin-bottom: 12px;
        }

        .tool-card .tool-params {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 12px;
            color: var(--text-muted);
        }

        .tool-card.scan .tool-name { color: var(--accent-blue); }
        .tool-card.preview .tool-name { color: var(--accent-purple); }
        .tool-card.parse .tool-name { color: var(--accent-green); }
        .tool-card.read .tool-name { color: var(--accent-cyan); }
        .tool-card.grep .tool-name { color: var(--accent-orange); }
        .tool-card.glob .tool-name { color: var(--accent-yellow); }

        /* Phase diagram */
        .phase-row {
            display: flex;
            align-items: center;
            gap: 40px;
            margin: 16px 0;
            padding: 20px 30px;
            background: var(--bg-elevated);
            border-radius: 8px;
            max-width: 1000px;
            width: 100%;
        }

        .phase-num {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 32px;
            font-weight: 600;
            min-width: 60px;
        }

        .phase-content {
            flex: 1;
        }

        .phase-title {
            font-size: 24px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .phase-desc {
            font-size: 16px;
            color: var(--text-dim);
        }

        .phase-tool {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 14px;
            padding: 6px 14px;
            border-radius: 4px;
            background: var(--bg-code);
        }

        /* Flow list */
        .flow-list {
            list-style: none;
            max-width: 800px;
        }

        .flow-list li {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 16px 0;
            border-bottom: 1px solid var(--bg-elevated);
        }

        .flow-num {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 14px;
            color: var(--accent-cyan);
            background: var(--bg-elevated);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .flow-content {
            flex: 1;
        }

        .flow-content strong {
            color: var(--text);
        }

        .flow-content span {
            color: var(--text-dim);
        }

        /* Subtitle */
        .subtitle {
            font-size: 28px;
            font-style: italic;
            color: var(--text-dim);
            margin-top: 12px;
        }

        .section-label {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 12px;
            color: var(--accent-purple);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 16px;
        }

        /* Two column */
        .two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            max-width: 1200px;
            width: 100%;
            align-items: start;
        }

        .col {
            text-align: left;
        }

        .col h3 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        /* Token tracking */
        .token-box {
            background: var(--bg-elevated);
            border-radius: 8px;
            padding: 24px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 14px;
        }

        .token-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--bg-code);
        }

        .token-row:last-child {
            border-bottom: none;
            padding-top: 12px;
            margin-top: 8px;
            border-top: 2px solid var(--accent-cyan);
            font-weight: 600;
        }

        .token-label { color: var(--text-dim); }
        .token-value { color: var(--accent-cyan); }

        /* Decision tree */
        .decision-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .decision-node {
            background: var(--bg-elevated);
            border: 2px solid var(--accent-purple);
            border-radius: 8px;
            padding: 12px 24px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 14px;
            color: var(--accent-purple);
        }

        .decision-branch {
            display: flex;
            gap: 40px;
        }

        .decision-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .decision-label {
            font-size: 12px;
            color: var(--text-muted);
        }

        .decision-action {
            background: var(--bg-code);
            border-radius: 4px;
            padding: 8px 16px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 13px;
        }

        .decision-action.green { color: var(--accent-green); }
        .decision-action.yellow { color: var(--accent-yellow); }
        .decision-action.blue { color: var(--accent-blue); }

        /* JSON schema */
        .json-block {
            background: var(--bg-code);
            border-radius: 8px;
            padding: 20px 28px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 14px;
            line-height: 1.8;
            text-align: left;
            max-width: 600px;
        }

        .json-key { color: var(--accent-blue); }
        .json-string { color: var(--accent-green); }
        .json-type { color: var(--accent-yellow); }
        .json-comment { color: var(--text-muted); font-style: italic; }

        /* Navigation */
        .nav {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 10px;
            color: var(--text-muted);
            z-index: 100;
            background: var(--bg-deep);
            border-right: 1px solid var(--bg-elevated);
        }

        .nav-dots {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .nav-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background: var(--text-muted);
            cursor: pointer;
            transition: all 0.3s;
        }

        .nav-dot.active {
            background: var(--accent-cyan);
            transform: scale(1.6);
            box-shadow: 0 0 8px var(--accent-cyan);
        }

        .nav-counter {
            font-size: 9px;
            color: var(--text-dim);
            margin-bottom: 6px;
        }

        .nav-hint {
            writing-mode: vertical-rl;
            transform: rotate(180deg);
            opacity: 0.4;
            font-size: 8px;
            margin-top: 10px;
        }

        /* Stats row */
        .stats-row {
            display: flex;
            gap: 40px;
            margin: 30px 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 48px;
            font-weight: 300;
            font-family: 'Crimson Pro', serif;
        }

        .stat-label {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Connector lines */
        .connector {
            width: 2px;
            height: 30px;
            background: var(--text-muted);
        }

        .connector-h {
            width: 40px;
            height: 2px;
            background: var(--text-muted);
        }
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    
    <div class="presentation" id="presentation">
        
        <!-- Slide 1: Title -->
        <div class="slide active" data-fragments="0">
            <div class="section-label">Technical Deep Dive</div>
            <h1><span class="mono">fs-explorer</span></h1>
            <p class="subtitle">Agentic Document Search Implementation</p>
        </div>

        <!-- Slide 2: Architecture Overview -->
        <div class="slide" data-fragments="3">
            <h2>System <span class="highlight">Architecture</span></h2>
            <div class="diagram fragment" data-index="0">
                <div class="box cyan large">User Query</div>
            </div>
            <div class="arrow arrow-down fragment" data-index="0">↓</div>
            <div class="diagram fragment" data-index="1">
                <div class="box purple">Workflow Engine</div>
                <span class="arrow">↔</span>
                <div class="box yellow">Agent</div>
                <span class="arrow">↔</span>
                <div class="box green">Gemini 3 Flash</div>
            </div>
            <div class="arrow arrow-down fragment" data-index="1">↓</div>
            <div class="diagram fragment" data-index="2">
                <div class="box blue small">scan_folder</div>
                <div class="box blue small">preview_file</div>
                <div class="box blue small">parse_file</div>
                <div class="box blue small">read</div>
                <div class="box blue small">grep</div>
                <div class="box blue small">glob</div>
            </div>
        </div>

        <!-- Slide 3: Core Components -->
        <div class="slide" data-fragments="3">
            <h2>Core <span class="highlight-purple">Components</span></h2>
            <div class="arch-grid">
                <div class="arch-box fragment" data-index="0">
                    <h4>Workflow Engine</h4>
                    <ul>
                        <li>LlamaIndex Workflows</li>
                        <li>Event-driven architecture</li>
                        <li>Async step execution</li>
                        <li>Timeout handling</li>
                    </ul>
                </div>
                <div class="arch-box fragment" data-index="1">
                    <h4>Agent</h4>
                    <ul>
                        <li>Google Gemini 3 Flash</li>
                        <li>Structured JSON output</li>
                        <li>Tool selection logic</li>
                        <li>Token tracking</li>
                    </ul>
                </div>
                <div class="arch-box fragment" data-index="2">
                    <h4>Document Parser</h4>
                    <ul>
                        <li>Docling library</li>
                        <li>PDF, DOCX, PPTX, XLSX</li>
                        <li>Local processing</li>
                        <li>Markdown export</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 4: The 6 Tools -->
        <div class="slide" data-fragments="2">
            <h2>The <span class="highlight-yellow">6 Tools</span></h2>
            <div class="tool-grid fragment" data-index="0">
                <div class="tool-card scan">
                    <div class="tool-name">scan_folder</div>
                    <div class="tool-desc">Parallel scan of ALL documents in a folder</div>
                    <div class="tool-params">params: directory</div>
                </div>
                <div class="tool-card preview">
                    <div class="tool-name">preview_file</div>
                    <div class="tool-desc">Quick preview (~3000 chars, first page)</div>
                    <div class="tool-params">params: file_path</div>
                </div>
                <div class="tool-card parse">
                    <div class="tool-name">parse_file</div>
                    <div class="tool-desc">Full document extraction</div>
                    <div class="tool-params">params: file_path</div>
                </div>
                <div class="tool-card read">
                    <div class="tool-name">read</div>
                    <div class="tool-desc">Read plain text files</div>
                    <div class="tool-params">params: file_path</div>
                </div>
                <div class="tool-card grep">
                    <div class="tool-name">grep</div>
                    <div class="tool-desc">Search for regex patterns</div>
                    <div class="tool-params">params: file_path, pattern</div>
                </div>
                <div class="tool-card glob">
                    <div class="tool-name">glob</div>
                    <div class="tool-desc">Find files by pattern</div>
                    <div class="tool-params">params: directory, pattern</div>
                </div>
            </div>
            <p class="fragment" data-index="1" style="margin-top: 30px;">
                Agent decides which tool to use based on the <span class="highlight">current context</span>
            </p>
        </div>

        <!-- Slide 5: scan_folder Deep Dive -->
        <div class="slide" data-fragments="3">
            <h2><span class="highlight-blue mono">scan_folder</span> — The Key Innovation</h2>
            <div class="two-col">
                <div class="col fragment" data-index="0">
                    <h3>How It Works</h3>
                    <div class="code-block">
<span class="keyword">def</span> <span class="function">scan_folder</span>(<span class="param">directory</span>):
    <span class="comment"># 1. Find all documents</span>
    files = glob(<span class="string">"*.pdf, *.docx..."</span>)
    
    <span class="comment"># 2. Parallel processing</span>
    <span class="keyword">with</span> ThreadPoolExecutor(<span class="param">max_workers=4</span>):
        previews = executor.map(
            preview_file, files
        )
    
    <span class="comment"># 3. Return combined result</span>
    <span class="keyword">return</span> format_previews(previews)
                    </div>
                </div>
                <div class="col fragment" data-index="1">
                    <h3>Why It Matters</h3>
                    <ul class="flow-list">
                        <li>
                            <div class="flow-num">1</div>
                            <div class="flow-content">
                                <strong>Single API call</strong><br>
                                <span>Agent sees all docs at once</span>
                            </div>
                        </li>
                        <li>
                            <div class="flow-num">2</div>
                            <div class="flow-content">
                                <strong>Parallel I/O</strong><br>
                                <span>4x faster than sequential</span>
                            </div>
                        </li>
                        <li>
                            <div class="flow-num">3</div>
                            <div class="flow-content">
                                <strong>Informed decisions</strong><br>
                                <span>Can categorize before deep dive</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 6: Three-Phase Strategy -->
        <div class="slide" data-fragments="3">
            <h2>Three-Phase <span class="highlight-green">Strategy</span></h2>
            <div class="phase-row fragment" data-index="0">
                <div class="phase-num" style="color: var(--accent-blue);">01</div>
                <div class="phase-content">
                    <div class="phase-title">Parallel Scan</div>
                    <div class="phase-desc">Scan ALL documents in the folder at once. Get quick previews of everything.</div>
                </div>
                <div class="phase-tool" style="color: var(--accent-blue);">scan_folder()</div>
            </div>
            <div class="phase-row fragment" data-index="1">
                <div class="phase-num" style="color: var(--accent-green);">02</div>
                <div class="phase-content">
                    <div class="phase-title">Deep Dive</div>
                    <div class="phase-desc">Full extraction on RELEVANT documents only. Watch for cross-references.</div>
                </div>
                <div class="phase-tool" style="color: var(--accent-green);">parse_file()</div>
            </div>
            <div class="phase-row fragment" data-index="2">
                <div class="phase-num" style="color: var(--accent-yellow);">03</div>
                <div class="phase-content">
                    <div class="phase-title">Backtrack</div>
                    <div class="phase-desc">If a document references one that was SKIPPED, go back and read it.</div>
                </div>
                <div class="phase-tool" style="color: var(--accent-yellow);">parse_file() again</div>
            </div>
        </div>

        <!-- Slide 7: Agent Decision Loop -->
        <div class="slide" data-fragments="4">
            <h2>Agent <span class="highlight-purple">Decision Loop</span></h2>
            <div class="diagram-vertical">
                <div class="box purple fragment" data-index="0">Receive Context + History</div>
                <div class="connector fragment" data-index="0"></div>
                <div class="box blue fragment" data-index="1">Gemini 3 Flash → JSON</div>
                <div class="connector fragment" data-index="1"></div>
                <div class="decision-tree fragment" data-index="2">
                    <div class="decision-node">Action Type?</div>
                    <div style="display: flex; gap: 20px; margin-top: 12px;">
                        <div class="decision-option">
                            <div class="decision-label">tool_call</div>
                            <div class="decision-action green">Execute Tool</div>
                        </div>
                        <div class="decision-option">
                            <div class="decision-label">go_deeper</div>
                            <div class="decision-action yellow">Change Directory</div>
                        </div>
                        <div class="decision-option">
                            <div class="decision-label">stop</div>
                            <div class="decision-action blue">Return Answer</div>
                        </div>
                    </div>
                </div>
                <div class="connector fragment" data-index="3"></div>
                <div class="box green fragment" data-index="3">Add Result to History → Loop</div>
            </div>
        </div>

        <!-- Slide 8: Structured JSON Output -->
        <div class="slide" data-fragments="2">
            <h2><span class="highlight-yellow">Structured</span> JSON Output</h2>
            <div class="two-col">
                <div class="col fragment" data-index="0">
                    <h3>Request to Gemini</h3>
                    <div class="json-block">
{
  <span class="json-key">"response_mime_type"</span>: <span class="json-string">"application/json"</span>,
  <span class="json-key">"response_schema"</span>: Action
}
                    </div>
                    <p style="font-size: 14px; color: var(--text-muted); margin-top: 16px; text-align: left;">
                        Uses Gemini's native JSON mode — no parsing errors
                    </p>
                </div>
                <div class="col fragment" data-index="1">
                    <h3>Response Schema</h3>
                    <div class="json-block">
{
  <span class="json-key">"action_type"</span>: <span class="json-type">"tool_call"</span>,
  <span class="json-key">"reason"</span>: <span class="json-string">"Need to scan folder..."</span>,
  <span class="json-key">"tool_call"</span>: {
    <span class="json-key">"tool_name"</span>: <span class="json-string">"scan_folder"</span>,
    <span class="json-key">"tool_input"</span>: {
      <span class="json-key">"directory"</span>: <span class="json-string">"./docs"</span>
    }
  }
}
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 9: Document Caching -->
        <div class="slide" data-fragments="2">
            <h2>Document <span class="highlight-cyan">Caching</span></h2>
            <div class="diagram fragment" data-index="0">
                <div class="box orange">parse_file("doc.pdf")</div>
                <span class="arrow">→</span>
                <div class="decision-tree" style="gap: 4px;">
                    <div class="decision-node" style="font-size: 13px;">In Cache?</div>
                    <div style="display: flex; gap: 30px; margin-top: 8px;">
                        <div class="decision-option">
                            <div class="decision-label">Yes</div>
                            <div class="decision-action green">Return cached</div>
                        </div>
                        <div class="decision-option">
                            <div class="decision-label">No</div>
                            <div class="decision-action yellow">Parse + Cache</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="code-block fragment" data-index="1" style="margin-top: 30px;">
<span class="type">DOCUMENT_CACHE</span>: dict[str, str] = {}

<span class="keyword">def</span> <span class="function">parse_file</span>(<span class="param">file_path</span>) -> str:
    <span class="keyword">if</span> file_path <span class="keyword">in</span> DOCUMENT_CACHE:
        <span class="keyword">return</span> DOCUMENT_CACHE[file_path]  <span class="comment"># Instant!</span>
    
    result = docling.convert(file_path)
    DOCUMENT_CACHE[file_path] = result
    <span class="keyword">return</span> result
            </div>
        </div>

        <!-- Slide 10: Cross-Reference Detection -->
        <div class="slide" data-fragments="2">
            <h2><span class="highlight-green">Cross-Reference</span> Detection</h2>
            <div class="two-col">
                <div class="col fragment" data-index="0">
                    <h3>Patterns We Look For</h3>
                    <div class="code-block" style="font-size: 15px;">
<span class="string">"See Exhibit A/B/C..."</span>
<span class="string">"As stated in the [Document]..."</span>
<span class="string">"Refer to Section 4.2..."</span>
<span class="string">"Per Schedule 2.3(b)..."</span>
<span class="string">"Subject to Appendix..."</span>
                    </div>
                </div>
                <div class="col fragment" data-index="1">
                    <h3>Agent Behavior</h3>
                    <ul class="flow-list">
                        <li>
                            <div class="flow-num">1</div>
                            <div class="flow-content">
                                <strong>Detects reference</strong><br>
                                <span>"See Exhibit B for adjustments"</span>
                            </div>
                        </li>
                        <li>
                            <div class="flow-num">2</div>
                            <div class="flow-content">
                                <strong>Checks if skipped</strong><br>
                                <span>Was Exhibit B in the SKIP list?</span>
                            </div>
                        </li>
                        <li>
                            <div class="flow-num">3</div>
                            <div class="flow-content">
                                <strong>Backtracks</strong><br>
                                <span>parse_file("exhibit_b.pdf")</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 11: Token Tracking -->
        <div class="slide" data-fragments="2">
            <h2><span class="highlight-yellow">Token</span> Tracking</h2>
            <div class="two-col">
                <div class="col fragment" data-index="0">
                    <h3>What We Track</h3>
                    <div class="token-box">
                        <div class="token-row">
                            <span class="token-label">API Calls</span>
                            <span class="token-value">3</span>
                        </div>
                        <div class="token-row">
                            <span class="token-label">Prompt Tokens</span>
                            <span class="token-value">8,542</span>
                        </div>
                        <div class="token-row">
                            <span class="token-label">Completion Tokens</span>
                            <span class="token-value">1,823</span>
                        </div>
                        <div class="token-row">
                            <span class="token-label">Documents Scanned</span>
                            <span class="token-value">25</span>
                        </div>
                        <div class="token-row">
                            <span class="token-label">Documents Parsed</span>
                            <span class="token-value">4</span>
                        </div>
                        <div class="token-row">
                            <span class="token-label">Estimated Cost</span>
                            <span class="token-value" style="color: var(--accent-green);">$0.0012</span>
                        </div>
                    </div>
                </div>
                <div class="col fragment" data-index="1">
                    <h3>Gemini Flash Pricing</h3>
                    <div class="code-block" style="font-size: 14px;">
<span class="comment"># Per million tokens</span>
<span class="type">INPUT_COST</span>  = $<span class="string">0.075</span>
<span class="type">OUTPUT_COST</span> = $<span class="string">0.30</span>

<span class="comment"># Example: 10K tokens</span>
cost = (8542 × 0.075 + 1823 × 0.30) / 1M
     = <span class="string">$0.0012</span>
                    </div>
                    <p style="font-size: 16px; color: var(--text-dim); margin-top: 20px;">
                        25 documents analyzed for ~$0.001
                    </p>
                </div>
            </div>
        </div>

        <!-- Slide 12: Workflow Events -->
        <div class="slide" data-fragments="4">
            <h2>Workflow <span class="highlight-purple">Events</span></h2>
            <table class="table fragment" data-index="0">
                <thead>
                    <tr>
                        <th>Event</th>
                        <th>Trigger</th>
                        <th>Data</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="fragment" data-index="1">
                        <td class="tool-name">ToolCallEvent</td>
                        <td>Agent calls a tool</td>
                        <td>tool_name, tool_input, reason</td>
                    </tr>
                    <tr class="fragment" data-index="2">
                        <td class="tool-name">GoDeeperEvent</td>
                        <td>Agent navigates to directory</td>
                        <td>directory, reason</td>
                    </tr>
                    <tr class="fragment" data-index="3">
                        <td class="tool-name">AskHumanEvent</td>
                        <td>Agent needs clarification</td>
                        <td>question, reason</td>
                    </tr>
                    <tr class="fragment" data-index="4">
                        <td class="tool-name">ExplorationEndEvent</td>
                        <td>Agent has answer</td>
                        <td>final_result, error</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Slide 13: File Structure -->
        <div class="slide" data-fragments="1">
            <h2>Project <span class="highlight-cyan">Structure</span></h2>
            <div class="code-block fragment" data-index="0" style="font-size: 15px; max-width: 700px;">
<span class="type">src/fs_explorer/</span>
├── <span class="function">agent.py</span>      <span class="comment"># Gemini client, token tracking</span>
├── <span class="function">workflow.py</span>   <span class="comment"># LlamaIndex workflow engine</span>
├── <span class="function">fs.py</span>         <span class="comment"># File tools: scan, parse, grep</span>
├── <span class="function">models.py</span>     <span class="comment"># Pydantic models for actions</span>
├── <span class="function">main.py</span>       <span class="comment"># CLI entry point (Typer)</span>
├── <span class="function">server.py</span>     <span class="comment"># FastAPI + WebSocket server</span>
└── <span class="function">ui.html</span>       <span class="comment"># Single-file web interface</span>
            </div>
        </div>

        <!-- Slide 14: Tech Stack -->
        <div class="slide" data-fragments="2">
            <h2>Tech <span class="highlight-orange">Stack</span></h2>
            <div class="arch-grid fragment" data-index="0">
                <div class="arch-box">
                    <h4>AI / LLM</h4>
                    <ul>
                        <li>Google Gemini 3 Flash</li>
                        <li>google-genai SDK</li>
                        <li>Structured JSON output</li>
                    </ul>
                </div>
                <div class="arch-box">
                    <h4>Document Processing</h4>
                    <ul>
                        <li>Docling (local parsing)</li>
                        <li>PDF, DOCX, PPTX, XLSX</li>
                        <li>Markdown conversion</li>
                    </ul>
                </div>
                <div class="arch-box">
                    <h4>Orchestration</h4>
                    <ul>
                        <li>LlamaIndex Workflows</li>
                        <li>Event-driven async</li>
                        <li>Step-based execution</li>
                    </ul>
                </div>
                <div class="arch-box fragment" data-index="1">
                    <h4>CLI</h4>
                    <ul>
                        <li>Typer</li>
                        <li>Rich (formatting)</li>
                    </ul>
                </div>
                <div class="arch-box fragment" data-index="1">
                    <h4>Web UI</h4>
                    <ul>
                        <li>FastAPI</li>
                        <li>WebSocket streaming</li>
                        <li>Single HTML file</li>
                    </ul>
                </div>
                <div class="arch-box fragment" data-index="1">
                    <h4>Package</h4>
                    <ul>
                        <li>uv (package manager)</li>
                        <li>Python 3.10+</li>
                        <li>python-dotenv</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 15: Performance -->
        <div class="slide" data-fragments="1">
            <h2><span class="highlight-green">Performance</span> Characteristics</h2>
            <div class="stats-row fragment" data-index="0">
                <div class="stat-item">
                    <div class="stat-value" style="color: var(--accent-blue);">~2s</div>
                    <div class="stat-label">Parallel Scan (25 docs)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" style="color: var(--accent-green);">~1s</div>
                    <div class="stat-label">Parse Single Doc</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" style="color: var(--accent-yellow);">~0.5s</div>
                    <div class="stat-label">Gemini Response</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" style="color: var(--accent-purple);">3-5</div>
                    <div class="stat-label">Typical API Calls</div>
                </div>
            </div>
            <p style="margin-top: 40px; color: var(--text-dim);">
                Total query time: <span class="highlight">5-15 seconds</span> depending on document count
            </p>
        </div>

        <!-- Slide 16: Extensibility -->
        <div class="slide" data-fragments="2">
            <h2><span class="highlight-purple">Extensibility</span></h2>
            <div class="two-col">
                <div class="col fragment" data-index="0">
                    <h3>Add New Tools</h3>
                    <div class="code-block" style="font-size: 14px;">
<span class="comment"># 1. Define function in fs.py</span>
<span class="keyword">def</span> <span class="function">summarize_file</span>(<span class="param">path</span>):
    ...

<span class="comment"># 2. Add to TOOLS dict in agent.py</span>
TOOLS = {
    ...,
    <span class="string">"summarize"</span>: summarize_file,
}

<span class="comment"># 3. Update Tools type in models.py</span>
Tools = Literal[..., <span class="string">"summarize"</span>]

<span class="comment"># 4. Document in system prompt</span>
                    </div>
                </div>
                <div class="col fragment" data-index="1">
                    <h3>Swap LLM Provider</h3>
                    <div class="code-block" style="font-size: 14px;">
<span class="comment"># Replace in agent.py</span>

<span class="comment"># From:</span>
<span class="keyword">from</span> google.genai <span class="keyword">import</span> Client

<span class="comment"># To:</span>
<span class="keyword">from</span> anthropic <span class="keyword">import</span> Anthropic
<span class="comment"># or</span>
<span class="keyword">from</span> openai <span class="keyword">import</span> OpenAI

<span class="comment"># Update generate_content call</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 17: Key Insights -->
        <div class="slide" data-fragments="3">
            <h2>Key <span class="highlight-yellow">Insights</span></h2>
            <ul class="flow-list">
                <li class="fragment" data-index="0">
                    <div class="flow-num">1</div>
                    <div class="flow-content">
                        <strong>Parallel scanning is crucial</strong><br>
                        <span>One scan_folder call gives the agent full context to make smart decisions</span>
                    </div>
                </li>
                <li class="fragment" data-index="1">
                    <div class="flow-num">2</div>
                    <div class="flow-content">
                        <strong>Structured output prevents errors</strong><br>
                        <span>JSON schema means no parsing failures, predictable actions</span>
                    </div>
                </li>
                <li class="fragment" data-index="2">
                    <div class="flow-num">3</div>
                    <div class="flow-content">
                        <strong>Backtracking enables thoroughness</strong><br>
                        <span>Cross-reference detection finds information RAG would miss</span>
                    </div>
                </li>
                <li class="fragment" data-index="3">
                    <div class="flow-num">4</div>
                    <div class="flow-content">
                        <strong>Caching keeps costs low</strong><br>
                        <span>Documents parsed once, reused for all references</span>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Slide 18: Summary -->
        <div class="slide" data-fragments="0">
            <h2>Summary</h2>
            <div class="diagram" style="margin-top: 40px;">
                <div class="box cyan">Query</div>
                <span class="arrow">→</span>
                <div class="box blue">Scan</div>
                <span class="arrow">→</span>
                <div class="box green">Categorize</div>
                <span class="arrow">→</span>
                <div class="box yellow">Deep Dive</div>
                <span class="arrow">→</span>
                <div class="box orange">Backtrack</div>
                <span class="arrow">→</span>
                <div class="box purple">Answer</div>
            </div>
            <p style="margin-top: 50px; font-size: 28px;">
                <span class="highlight">6 tools</span> · 
                <span class="highlight-green">3 phases</span> · 
                <span class="highlight-yellow">~$0.001/query</span>
            </p>
        </div>

    </div>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-counter" id="navCounter">1/18</div>
        <div class="nav-dots" id="navDots"></div>
        <span class="nav-hint">↑↓</span>
    </nav>

    <script>
        let currentSlide = 0;
        let currentFragment = 0;
        const slides = document.querySelectorAll('.slide');
        const navDots = document.getElementById('navDots');

        function init() {
            slides.forEach((_, i) => {
                const dot = document.createElement('div');
                dot.className = 'nav-dot' + (i === 0 ? ' active' : '');
                dot.onclick = () => goToSlide(i);
                navDots.appendChild(dot);
            });
            updateSlide();
        }

        function goToSlide(index) {
            if (index < 0 || index >= slides.length) return;
            slides[currentSlide].querySelectorAll('.fragment').forEach(f => f.classList.remove('visible'));
            slides[currentSlide].classList.remove('active');
            currentSlide = index;
            currentFragment = 0;
            setTimeout(updateSlide, 50);
        }

        function updateSlide() {
            slides.forEach((slide, i) => slide.classList.toggle('active', i === currentSlide));
            document.querySelectorAll('.nav-dot').forEach((dot, i) => dot.classList.toggle('active', i === currentSlide));
            document.getElementById('navCounter').textContent = `${currentSlide + 1}/${slides.length}`;
        }

        function next() {
            const slide = slides[currentSlide];
            const maxFragments = parseInt(slide.dataset.fragments) || 0;
            if (currentFragment < maxFragments) {
                slide.querySelectorAll(`[data-index="${currentFragment}"]`).forEach(f => f.classList.add('visible'));
                currentFragment++;
            } else {
                goToSlide(currentSlide + 1);
            }
        }

        function prev() {
            if (currentFragment > 0) {
                currentFragment--;
                slides[currentSlide].querySelectorAll(`[data-index="${currentFragment}"]`).forEach(f => f.classList.remove('visible'));
            } else {
                goToSlide(currentSlide - 1);
            }
        }

        document.addEventListener('keydown', (e) => {
            if (['ArrowRight', 'ArrowDown', ' ', 'Enter'].includes(e.key)) { e.preventDefault(); next(); }
            else if (['ArrowLeft', 'ArrowUp'].includes(e.key)) { e.preventDefault(); prev(); }
            else if (e.key === 'Home') goToSlide(0);
            else if (e.key === 'End') goToSlide(slides.length - 1);
        });

        document.querySelector('.presentation').addEventListener('click', (e) => {
            if (!e.target.closest('.nav')) next();
        });

        init();
    </script>
</body>
</html>

